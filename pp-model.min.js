!function(e,t){var n="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;if("function"==typeof define&&define.amd)define(["ppEvents","ppIs","ppValidate","exports"],(function(e,i,s,c){n.ppModel=t(n,c,e,i,s)}));else if("undefined"!=typeof exports){var i={},s={},c={};try{i=require("pp-events")}catch(e){}try{s=require("pp-is")}catch(e){}try{c=require("pp-validate")}catch(e){}module.exports=t(n,exports,i,s,c)}else n.ppModel=t(n,{},n.ppEvents,n.ppIs,n.ppValidate)}(this,(function(e,t,n,i,s){var c={},r=i.isUndefined(n)?null:new n,a=function(e,t){i.isObject(e)&&Object.assign(c,{...e}),i.isObject(t)&&Object.assign(c,{...t})},o=a.prototype;o.on=i.isNull(r)?function(){}:r.on,o.emit=i.isNull(r)?function(){}:r.emit,o.removeListener=i.isNull(r)?function(){}:r.removeListener,o.get=function(e){if(i.isString(e)&&c.hasOwnProperty(e))return c[e]},o.set=function(e,t){this.has(e)&&(i.isNull(r)?c[e]=t:r.checkOn("change:"+e)||r.checkOn("changed:"+e)?r.checkOn("change:"+e)?this.emit("change:"+e,t,c[e],function(){c[e]=t,r.checkOn("changed:"+e)&&this.emit("changed:"+e,t)}.bind(this)):(c[e]=t,r.checkOn("changed:"+e)&&this.emit("changed:"+e,t)):(c[e]=t,this.emit("changed:"+e,t)))},o.stringify=function(e,t){return JSON.stringify(c,e,t)},o.keys=function(){return Object.keys({...c})},o.has=function(e){return!!i.isString(e)&&c.hasOwnProperty(e)},o.values=function(){return Object.values({...c})},o.getAll=function(){return Object.assign({},{...c})};for(var u=Object.keys(i),f=0;f<u.length;f++){var l=u[f];o[l]=function(e,t,n){return c.hasOwnProperty(t)?e(c[t],n):e(void 0,n)}.bind(this,i[l])}o.pick=function(){var e=[].slice.call(arguments),t={};return e.length>0?(i.isObject(c)&&e.forEach((e=>{i.isString(e)&&c.hasOwnProperty(e)&&(t[e]=c[e])})),Object.assign({...t},{})):t},o.omit=function(){var e=[].slice.call(arguments),t={};return e.length>0?(i.isObject(c)&&(t=Object.assign({},{...c}),e.forEach((e=>{i.isString(e)&&c.hasOwnProperty(e)&&delete t[e]}))),Object.assign({...t},{})):t},o.validate=function(e){return i.isFunction(s)?s(this.data,e):null};return function(e){return this.main=function(e){var t=null;return i.isObject(e)&&e.hasOwnProperty("defaults")&&i.isObject(e.defaults)&&(t=Object.assign({},e.defaults)),a.bind(this,t)},this.main(e||{})}}));