!function(e,n){var t="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;if("function"==typeof define&&define.amd)define(["ppEvents","ppIs","exports"],(function(e,i,s){t.ppModel=n(t,s,e,i)}));else if("undefined"!=typeof exports){var i={},s={};try{i=require("pp-events")}catch(e){}try{s=require("pp-is")}catch(e){}module.exports=n(t,exports,i,s)}else t.ppModel=n(t,{},t.ppEvents,t.ppIs)}(this,(function(e,n,t,i){var s={},c=i.isUndefined(t)?null:new t,r=function(e,n){i.isObject(e)&&Object.assign(s,{...e}),i.isObject(n)&&Object.assign(s,{...n})},o=r.prototype;o.on=i.isNull(c)?function(){}:c.on,o.emit=i.isNull(c)?function(){}:c.emit,o.removeListener=i.isNull(c)?function(){}:c.removeListener,o.get=function(e){if(i.isString(e)&&s.hasOwnProperty(e))return s[e]},o.set=function(e,n){this.has(e)&&(i.isNull(c)?s[e]=n:c.checkOn("change:"+e)||c.checkOn("changed:"+e)?c.checkOn("change:"+e)?this.emit("change:"+e,n,s[e],function(){s[e]=n,c.checkOn("changed:"+e)&&this.emit("changed:"+e,n)}.bind(this)):(s[e]=n,c.checkOn("changed:"+e)&&this.emit("changed:"+e,n)):(s[e]=n,this.emit("changed:"+e,n)))},o.stringify=function(e,n){return JSON.stringify(s,e,n)},o.keys=function(){return Object.keys({...s})},o.has=function(e){return!!i.isString(e)&&s.hasOwnProperty(e)},o.values=function(){return Object.values({...s})},o.getAll=function(){return Object.assign({},{...s})};for(var u=Object.keys(i),a=0;a<u.length;a++){var f=u[a];o[f]=function(e,n,t){return s.hasOwnProperty(n)?e(s[n],t):e(void 0,t)}.bind(this,i[f])}o.pick=function(){var e=[].slice.call(arguments),n={};return e.length>0?(i.isObject(s)&&e.forEach((e=>{i.isString(e)&&s.hasOwnProperty(e)&&(n[e]=s[e])})),Object.assign({...n},{})):n},o.omit=function(){var e=[].slice.call(arguments),n={};return e.length>0?(i.isObject(s)&&(n=Object.assign({},{...s}),e.forEach((e=>{i.isString(e)&&s.hasOwnProperty(e)&&delete n[e]}))),Object.assign({...n},{})):n};return function(e){return this.main=function(e){var n=null;return i.isObject(e)&&e.hasOwnProperty("defaults")&&i.isObject(e.defaults)&&(n=Object.assign({},e.defaults)),r.bind(this,n)},this.main(e||{})}}));