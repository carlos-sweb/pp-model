!function(e,t){var n="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;if("function"==typeof define&&define.amd)define(["ppEvents","ppIs","exports"],(function(e,i,s){n.ppModel=t(n,s,e,i)}));else if("undefined"!=typeof exports){var i={},s={};try{i=require("pp-events")}catch(e){}try{s=require("pp-is")}catch(e){}module.exports=t(n,exports,i,s)}else n.ppModel=t(n,{},n.ppEvents,n.ppIs)}(this,(function(e,t,n,i){var s={},r=i.isUndefined(n)?null:new n,c=function(e,t){i.isObject(e)&&Object.assign(s,{...e}),i.isObject(t)&&Object.assign(s,{...t})},o=c.prototype;o.on=i.isNull(r)?function(){}:r.on,o.emit=i.isNull(r)?function(){}:r.emit,o.removeListener=i.isNull(r)?function(){}:r.removeListener,o.get=function(e){if(i.isString(e)&&s.hasOwnProperty(e))return s[e]},o.set=function(e,t){this.has(e)&&(i.isNull(r)?s[e]=t:r.checkOn("change:"+e)||r.checkOn("changed:"+e)?this.emit("change:"+e,t,s[e],function(){s[e]=t,this.emit("changed:"+e,t)}.bind(this)):(s[e]=t,this.emit("changed:"+e,t)))},o.stringify=function(e,t){return JSON.stringify(s,e,t)},o.keys=function(){return Object.keys({...s})},o.has=function(e){return!!i.isString(e)&&s.hasOwnProperty(e)},o.values=function(){return Object.values({...s})},o.getAll=function(){return Object.assign({},{...s})};for(var u=Object.keys(i),f=0;f<u.length;f++){var a=u[f];o[a]=function(e,t,n){return s.hasOwnProperty(t)?e(s[t],n):e(void 0,n)}.bind(this,i[a])}o.pick=function(){var e=[].slice.call(arguments),t={};return e.length>0?(i.isObject(s)&&e.forEach((e=>{i.isString(e)&&s.hasOwnProperty(e)&&(t[e]=s[e])})),Object.assign({...t},{})):t},o.omit=function(){var e=[].slice.call(arguments),t={};return e.length>0?(i.isObject(s)&&(t=Object.assign({},{...s}),e.forEach((e=>{i.isString(e)&&s.hasOwnProperty(e)&&delete t[e]}))),Object.assign({...t},{})):t};return function(e){return this.main=function(e){var t=null;return i.isObject(e)&&e.hasOwnProperty("defaults")&&i.isObject(e.defaults)&&(t=Object.assign({},e.defaults)),c.bind(this,t)},this.main(e||{})}}));